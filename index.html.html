<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#ffeed3;           /* Ø®Ù„ÙÙŠØ© Ø¹Ø§Ø¬ÙŠØ© */
      --ink:#3e000c;          /* Ø¹Ù†Ø§Ø¨ÙŠ ØºØ§Ù…Ù‚ Ù„Ù„Ù†Øµ */
      --muted:#7e4a55;        /* Ù†Øµ Ø«Ø§Ù†ÙˆÙŠ Ø¹Ù†Ø§Ø¨ÙŠ ÙØ§ØªØ­ */
      --card:#fff7ea;         /* Ø¨Ø·Ø§Ù‚Ø© ÙØ§ØªØ­Ø© */
      --border:#f1d7b8;       /* Ø­Ø¯ÙˆØ¯ Ù†Ø§Ø¹Ù…Ø© */
      --accent:#b8860b;       /* Ø°Ù‡Ø¨ÙŠ Ù†Ø§Ø¹Ù… Ù„Ù„Ø£Ø²Ø±Ø§Ø± */
      --accent-2:#d4af37;     /* Ø°Ù‡Ø¨ÙŠ Ù„Ø§Ù…Ø¹ Ø®ÙÙŠÙ */
      --diamond-1:#89CFF0;    /* ØªØ¯Ø±Ø¬ Ù…Ø§Ø³Ø© */
      --diamond-2:#bde3fb;    /* ØªØ¯Ø±Ø¬ Ù…Ø§Ø³Ø© */
      --danger:#c81e1e;       /* Ø£Ø­Ù…Ø± Ù„Ù„Ø®Ø·Ø£ */
      --navy:#001f3f;         /* ÙƒØ­Ù„ÙŠ Ù„Ù„ÙŠØ²Ø± */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:'Tajawal',system-ui,Arial}
    .wrap{max-width:1100px;margin:24px auto;padding:16px}
    .title{font-size:26px;font-weight:800;margin:0 0 14px;display:flex;gap:10px;align-items:center}
    .subtitle{color:var(--muted);margin-bottom:18px}

    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    @media (max-width:880px){.grid{grid-template-columns:1fr;}}

    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:16px}
    label{font-size:14px;color:var(--muted);display:block;margin-bottom:6px}
    input,select{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;font-size:16px;background:#fff;outline:none;color:var(--ink)}
    input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(212,175,55,.18)}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    .full{grid-column:1/-1}

    .error{color:var(--danger);font-weight:800;margin-top:8px;min-height:1.5em}
    .laser{color:var(--navy);font-weight:800;margin-top:8px;white-space:pre-line;min-height:2.6em}

    /* Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø±Ø³Ù… */
    .canvas-card{display:flex;flex-direction:column;align-items:center;gap:10px}
    svg{max-width:380px;height:auto;display:block}
    .size-label{font-weight:800;color:var(--ink)}

    /* Ø­Ù„Ù‚Ø© Ù…Ø¹Ø¯Ù†ÙŠØ© Ø¨ÙˆØ§Ù‚Ø¹ÙŠØ© Ø£Ø¹Ù„Ù‰ */
    .ring-stroke{stroke:url(#ringGrad);stroke-width:12;fill:url(#ringFill);filter:drop-shadow(0 6px 12px rgba(62,0,12,.12))}
    .ring-stroke-inner{stroke:url(#innerGrad);stroke-width:4;fill:#fff}
    .diamond{filter:drop-shadow(0 3px 6px rgba(0,0,0,.15))}

    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØ­ÙƒÙ… */
    .slider-wrap{display:flex;align-items:center;gap:10px;width:100%;}
    input[type=range]{appearance:none;width:100%;height:6px;border-radius:999px;background:#ead8bb;outline:none}
    input[type=range]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent-2);border:2px solid #fff;box-shadow:0 0 0 2px rgba(212,175,55,.35);cursor:pointer}
    input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--accent-2);border:2px solid #fff;box-shadow:0 0 0 2px rgba(212,175,55,.35);cursor:pointer}

    /* ØªÙ„Ø£Ù„Ø¤ Ø§Ù„Ù…Ø§Ø³Ø© */
    @keyframes sparkle{0%{fill:var(--diamond-1)}50%{fill:var(--diamond-2)}100%{fill:var(--diamond-1)}}
    .sparkle{animation:sparkle 1.2s ease-in-out infinite}

    /* Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ */
    .calib-bar{height:12px;background:linear-gradient(90deg,#fff,#f9e8c8);border:1px solid var(--border);border-radius:999px;position:relative}
    .calib-bar::before,.calib-bar::after{content:"";position:absolute;top:-6px;width:2px;height:24px;background:var(--accent-2)}
    .calib-bar::before{left:0}.calib-bar::after{right:0}
    .hint{font-size:12px;color:var(--muted)}
    .badge{display:inline-block;background:rgba(212,175,55,.14);color:var(--ink);border:1px solid var(--accent-2);padding:4px 8px;border-radius:999px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="title">ğŸ’ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA</h1>
    <div class="subtitle">Ø§Ø¶Ø¨Ø·ÙŠ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø¨Ø¯Ù‚Ø©ØŒ ÙˆØ¹Ø§ÙŠØ±ÙŠ Ø§Ù„Ø­Ø¬Ù… Ù„ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø¹Ù„Ù‰ Ø´Ø§Ø´Ø© Ù‡Ø§ØªÙÙƒ.</div>

    <div class="grid">
      <!-- Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª -->
      <div class="card">
        <div class="row">
          <div>
            <label>Ø³Ù…Ø§ÙƒØ© Ø§Ù„ÙØ¶Ø© (mm)</label>
            <select id="thickness">
              <option>1.0</option>
              <option>1.2</option>
              <option>1.5</option>
              <option>1.75</option>
              <option>2.0</option>
            </select>
          </div>
          <div style="align-self:end" class="hint">ØªØ¤Ø«Ù‘Ø± Ø¹Ù„Ù‰ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù„ÙŠØ²Ø± ÙÙ‚Ø·</div>
        </div>

        <div class="row" style="margin-top:12px">
          <div>
            <label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ (US)</label>
            <input id="us" inputmode="decimal" placeholder="Ù…Ø«Ø§Ù„: 7.5" />
          </div>
          <div>
            <label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠ (UK)</label>
            <input id="uk" placeholder="Ù…Ø«Ø§Ù„: KÂ½" />
          </div>
          <div>
            <label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„ÙØ±Ù†Ø³ÙŠ (FR)</label>
            <input id="fr" inputmode="decimal" placeholder="Ø§Ù„Ù…Ø­ÙŠØ· Ø¨Ø§Ù„Ù€ mm" />
          </div>
          <div>
            <label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠ (JP)</label>
            <input id="jp" inputmode="decimal" placeholder="Ù…Ø«Ø§Ù„: 19" />
          </div>
          <div>
            <label>Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (mm)</label>
            <input id="diameter" inputmode="decimal" placeholder="Ù…Ø«Ø§Ù„: 18.1" />
          </div>
          <div>
            <label>Ø§Ù„Ù…Ø­ÙŠØ· (mm)</label>
            <input id="circ" inputmode="decimal" placeholder="Ï€ Ã— Ø§Ù„Ù‚Ø·Ø±" />
          </div>
          <div class="full error" id="error"></div>
          <div class="full laser" id="laser"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="row3">
            <div>
              <label>Ù…Ø±Ø¬Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© (Ù…Ù…)</label>
              <input id="calibRefMm" type="number" min="5" max="100" step="0.5" value="25" />
            </div>
            <div>
              <label>ØªÙƒØ¨ÙŠØ± Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©</label>
              <input id="calibSlider" type="range" min="20" max="800" step="1" value="150" />
            </div>
            <div style="display:flex;align-items:end">
              <span class="badge" id="pxPerMmBadge">1 Ù…Ù… â‰ˆ â€” Ø¨ÙƒØ³Ù„</span>
            </div>
          </div>
          <div class="full" style="margin-top:10px">
            <div id="calibBar" class="calib-bar" style="width:150px"></div>
            <div class="hint" style="margin-top:6px">Ø¶ÙØ¹ÙÙŠ Ù…Ø³Ø·Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©ØŒ Ø«Ù… ÙƒØ¨Ù‘Ø±ÙŠ/ØµØºÙ‘Ø±ÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø­ØªÙ‰ ÙŠØ·Ø§Ø¨Ù‚ <b id="refText">25 Ù…Ù…</b> Ø¨Ø§Ù„Ø¶Ø¨Ø·. Ø¨Ø¹Ø¯Ù‡Ø§ Ø³ÙŠÙƒÙˆÙ† Ø§Ù„Ø®Ø§ØªÙ… Ø¨Ø­Ø¬Ù… ÙˆØ§Ù‚Ø¹ÙŠ.</div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªØ­ÙƒÙ… -->
      <div class="card canvas-card">
        <div id="sizeLabel" class="size-label">Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: â€” (US)</div>
        <svg id="ringSvg" viewBox="0 0 360 360" aria-label="Ø®Ø§ØªÙ… ØªÙØ§Ø¹Ù„ÙŠ">
          <defs>
            <!-- ØªØ¯Ø±Ù‘Ø¬Ø§Øª Ù…Ø¹Ø¯Ù†ÙŠØ© -->
            <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#d9d9d9"/>
              <stop offset="50%" stop-color="#f3f3f3"/>
              <stop offset="100%" stop-color="#c6c6c6"/>
            </linearGradient>
            <linearGradient id="innerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#eee"/>
              <stop offset="100%" stop-color="#fafafa"/>
            </linearGradient>
            <radialGradient id="ringFill" cx="50%" cy="40%" r="65%">
              <stop offset="0%" stop-color="#ffffff"/>
              <stop offset="60%" stop-color="#f7f7f7"/>
              <stop offset="100%" stop-color="#f0f0f0"/>
            </radialGradient>
          </defs>
          <circle id="outer" class="ring-stroke" cx="180" cy="190" r="60" />
          <circle id="inner" class="ring-stroke-inner" cx="180" cy="190" r="35" />
          <!-- Ø§Ù„Ù…Ø§Ø³Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 12 Ù…Ø¹ ØªÙ„Ø£Ù„Ø¤ -->
          <polygon id="diamond" class="sparkle diamond" points="180,90 170,100 180,110 190,100" fill="#89CFF0" stroke="#5a9bd4" stroke-width="2" />
        </svg>
        <div class="slider-wrap">
          <span class="hint">4</span>
          <input id="slider" type="range" min="4" max="14" step="0.5" value="8" />
          <span class="hint">14</span>
        </div>
        <div class="hint">Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø£Ùˆ Ø¹Ø¯Ù‘Ù„ÙŠ Ø£ÙŠ Ø®Ø§Ù†Ø© Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰ â€” Ø§Ù„ÙƒÙ„ ÙŠØªØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ âœ¨</div>
      </div>
    </div>
  </div>

  <script>
    // === Ø«ÙˆØ§Ø¨Øª ÙˆÙ…Ø¹Ø§Ø¯Ù„Ø§Øª ===
    const PI = Math.PI; const US_MIN = 4, US_MAX = 14;
    const usToDiameter = us => 11.63 + 0.8128 * us;      // mm
    const diameterToUs = d => (d - 11.63) / 0.8128;      // US
    const diameterToCirc = d => PI * d;                  // mm
    const usToFR = us => diameterToCirc(usToDiameter(us));
    const usToJP = us => us + 12;

    const UK_STEPS = [
      "H","HÂ½","I","IÂ½","J","JÂ½","K","KÂ½","L","LÂ½","M","MÂ½",
      "N","NÂ½","O","OÂ½","P","PÂ½","Q","QÂ½","R","RÂ½","S","SÂ½",
      "T","TÂ½","U","UÂ½","V","VÂ½","W","WÂ½","X","XÂ½","Y","YÂ½","Z","Z+Â½","Z+1"
    ];
    const usToUK = (us)=>{const idx=(us-US_MIN)/(US_MAX-US_MIN)*(UK_STEPS.length-1);return UK_STEPS[Math.max(0,Math.min(UK_STEPS.length-1,Math.round(idx)))]};
    const normalizeUK = s => s.trim().toUpperCase().replace("1/2","Â½");
    const ukToUs = uk => { const i = UK_STEPS.indexOf(normalizeUK(uk)); if(i<0) return null; return US_MIN + (i/(UK_STEPS.length-1))*(US_MAX-US_MIN); };

    // DOM
    const $ = id => document.getElementById(id);
    const el = { thickness:$("thickness"), us:$("us"), uk:$("uk"), fr:$("fr"), jp:$("jp"), diameter:$("diameter"), circ:$("circ"), error:$("error"), laser:$("laser"), slider:$("slider"), sizeLabel:$("sizeLabel"), outer:$("outer"), inner:$("inner"), diamond:$("diamond"), calibRefMm:$("calibRefMm"), calibSlider:$("calibSlider"), calibBar:$("calibBar"), refText:$("refText"), pxPerMmBadge:$("pxPerMmBadge") };

    let updating = false;      // ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
    let pxPerMM = 6.8;         // Ù‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŒ Ø³ØªÙØ³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©

    function setError(msg){ el.error.textContent = msg || ""; if(msg) el.laser.textContent = ""; }
    const fmt = (n,d=2)=> Number(n).toFixed(d).replace(/\.0+$/,'').replace(/\.$/,'');

    function drawRing(diameterMM){
      const rPx = (diameterMM/2) * pxPerMM; // Ø­Ø¬Ù… ÙˆØ§Ù‚Ø¹ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©
      const cx = 180, cy = 190;
      el.outer.setAttribute('r', rPx);
      el.inner.setAttribute('r', rPx/1.7);
      const dy = cy - rPx - 20;
      el.diamond.setAttribute('points', `${cx},${dy-8} ${cx-10},${dy} ${cx},${dy+8} ${cx+10},${dy}`);
    }

    function updateAllFromUS(us){
      if(us < US_MIN || us > US_MAX){ setError('âŒ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚ (4 â€“ 14)'); return; }
      setError('');
      const d = usToDiameter(us); const c = diameterToCirc(d); const fr = c; const jp = usToJP(us); const uk = usToUK(us);
      updating = true;
      el.us.value = fmt(us,2); el.uk.value = uk; el.fr.value = fmt(fr,1); el.jp.value = fmt(jp,1); el.diameter.value = fmt(d,2); el.circ.value = fmt(c,1); el.slider.value = us;
      updating = false;
      el.sizeLabel.textContent = `Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${fmt(us,1)} (US)`;
      drawRing(d);
      const thick = parseFloat(el.thickness.value || '1');
      const laserVal = (d + thick) * PI; el.laser.textContent = `Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ù„ÙŠØ²Ø±: ${fmt(laserVal,1)} mm
(Ø³Ù…Ø§ÙƒØ© Ø§Ù„ÙØ¶Ø©: ${fmt(thick,2)} mm)`;
    }

    // === Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ ===
    function applyCalibration(){
      const refMm = parseFloat(el.calibRefMm.value) || 25; const barPx = parseFloat(el.calibSlider.value) || 150; pxPerMM = barPx / refMm; // Ø¨ÙƒØ³Ù„ Ù„ÙƒÙ„ Ù…Ù„Ù…
      el.calibBar.style.width = `${barPx}px`; el.refText.textContent = `${fmt(refMm,1)} Ù…Ù…`; el.pxPerMmBadge.textContent = `1 Ù…Ù… â‰ˆ ${fmt(pxPerMM,2)} Ø¨ÙƒØ³Ù„`;
      // Ø£Ø¹Ø¯ Ø±Ø³Ù… Ø§Ù„Ø®Ø§ØªÙ… Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
      const d = parseFloat(el.diameter.value); if(!isNaN(d)) drawRing(d);
    }

    // === Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ===
    const tryNum = (v)=>{ if(v==null) return null; v=(""+v).trim(); if(!v || v==='.'||v==='-'||v==='-.') return null; const n = Number(v); return Number.isFinite(n)? n : null; };
    function handleUS(){ if(updating) return; const n = tryNum(el.us.value); if(n==null) return; updateAllFromUS(n); }
    function handleDiameter(){ if(updating) return; const n = tryNum(el.diameter.value); if(n==null) return; updateAllFromUS(diameterToUs(n)); }
    function handleCirc(){ if(updating) return; const n = tryNum(el.circ.value); if(n==null) return; updateAllFromUS(diameterToUs(n/PI)); }
    function handleFR(){ if(updating) return; const n = tryNum(el.fr.value); if(n==null) return; updateAllFromUS(diameterToUs(n/PI)); }
    function handleJP(){ if(updating) return; const n = tryNum(el.jp.value); if(n==null) return; updateAllFromUS(n-12); }
    function handleUK(){ if(updating) return; const us = ukToUs(el.uk.value); if(us==null) return; updateAllFromUS(us); }

    function handleSlider(){ if(updating) return; updateAllFromUS(parseFloat(el.slider.value)); }
    function handleThickness(){ const d = tryNum(el.diameter.value); if(d==null){ el.laser.textContent=''; return; } const t = parseFloat(el.thickness.value)||1; const laserVal=(d+t)*PI; el.laser.textContent=`Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ù„ÙŠØ²Ø±: ${fmt(laserVal,1)} mm
(Ø³Ù…Ø§ÙƒØ© Ø§Ù„ÙØ¶Ø©: ${fmt(t,2)} mm)`; }

    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    el.us.addEventListener('input', handleUS); el.uk.addEventListener('input', handleUK); el.fr.addEventListener('input', handleFR); el.jp.addEventListener('input', handleJP); el.diameter.addEventListener('input', handleDiameter); el.circ.addEventListener('input', handleCirc);
    el.slider.addEventListener('input', handleSlider); el.thickness.addEventListener('change', handleThickness);
    el.calibSlider.addEventListener('input', applyCalibration); el.calibRefMm.addEventListener('input', applyCalibration);

    // Ø¨Ø¯Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠ
    applyCalibration(); updateAllFromUS(8);
  </script>
</body>
</html>
