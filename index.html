<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ’ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA</title>

  <style>
    /* Ù…Ù†Ø¹ ØªØ£Ø«ÙŠØ± Ù‚Ø§Ù„Ø¨ Ø³Ù„Ø© */
    .page-width, .shopify-section, .container, .s-container {
      max-width:100% !important;
      padding:0 !important;
      margin:0 !important;
    }
    body, html {
      width:100%;
      overflow-x:hidden !important;
      background:#ffeed3;
      font-family:'Tajawal', sans-serif;
      color:#3e000c;
    }

    :root{
      --bg:#ffeed3;
      --ink:#3e000c;
      --muted:#7e4a55;
      --card:#fff7ea;
      --border:#f1d7b8;
      --accent:#b8860b;
      --accent-2:#d4af37;
      --danger:#c81e1e;
      --navy:#001f3f;
      --salsa:#3e000c;
    }

    *{box-sizing:border-box}

    .wrap{max-width:1100px;margin:24px auto;padding:16px}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      margin-bottom:18px;
    }
    .title{font-size:28px;font-weight:800;margin-bottom:14px}

    input{
      width:100%;
      padding:10px;
      border:1px solid var(--border);
      border-radius:10px;
      font-size:16px;
      background:white;
    }

    /* Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© */
    #calibrationScreen{
      display:none;
      position:fixed;
      inset:0;
      width:100vw;
      height:100vh;
      background:rgba(0,0,0,.75);
      text-align:center;
      padding-top:40px;
      z-index:99999;
      overflow-y:auto;
    }

    #cardBox{
      width:50px;
      height:120px;
      background:white;
      margin:30px auto;
      border-radius:8px;
      border:4px solid var(--salsa);
      transform-origin:center center !important;
    }

    input[type=range]{
      width:90%;
      margin-top:20px;
      appearance:none;
      height:6px;
      border-radius:999px;
      background:#ead8bb;
    }
    input[type=range]::-webkit-slider-thumb{
      appearance:none;
      width:20px;height:20px;
      border-radius:50%;
      background:var(--accent-2);
      border:2px solid white;
    }

    /* Ø§Ù„Ø±Ø³Ù… */
    svg{max-width:380px;margin:auto;display:block}
    .ring-stroke{
      stroke:var(--salsa);
      stroke-width:4;
      fill:#f5f5f5;
    }
    .ring-stroke-inner{
      stroke:var(--salsa);
      stroke-width:2;
      fill:white;
    }
  </style>

</head>
<body>

<div class="wrap">

  <h1 class="title">ğŸ’ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA</h1>

  <div class="card">
    <h3>ğŸ“˜ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3>
    <p>1) Ø§Ø¶ØºØ· "Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©".<br>
       2) Ø¶Ø¹ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø§Ù„Ø·ÙˆÙ„.<br>
       3) ÙƒØ¨Ù‘Ø±/ØµØºÙ‘Ø± Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø­ØªÙ‰ ÙŠØ·Ø§Ø¨Ù‚ Ø·ÙˆÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©.<br>
       4) Ø§Ø¶ØºØ· "Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚".</p>

    <button id="startCalib"
      style="margin-top:14px;padding:12px;border-radius:12px;
      background:var(--accent);color:white;border:none;font-size:17px;width:100%">
      Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©
    </button>
    <div id="calibStatus" style="margin-top:8px;color:var(--muted)">Ù„Ù… ØªØªÙ… Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø¨Ø¹Ø¯</div>
  </div>

  <div class="grid" style="display:grid;grid-template-columns:1.2fr .8fr;gap:16px">
    
    <div class="card">
      <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">

        <div><label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø£Ù…Ø±ÙŠÙƒÙŠ (US)</label><input id="us"></div>
        <div><label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠ (UK)</label><input id="uk"></div>

        <div><label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„ÙØ±Ù†Ø³ÙŠ (FR)</label><input id="fr"></div>
        <div><label>Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠ (JP)</label><input id="jp"></div>

        <div><label>Ø§Ù„Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (mm)</label><input id="diameter"></div>
        <div><label>Ø§Ù„Ù…Ø­ÙŠØ· (mm)</label><input id="circ"></div>

        <div class="full" id="error" style="color:var(--danger);font-weight:700"></div>
        <div class="full" id="laser" style="color:var(--navy);font-weight:700"></div>

      </div>
    </div>

    <div class="card">
      <div id="sizeLabel" style="font-weight:800;font-size:18px;margin-bottom:10px">
        Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: â€” (US)
      </div>

      <svg id="ringSvg" viewBox="0 0 360 360">
        <circle id="outer" class="ring-stroke" cx="180" cy="190" r="60" />
        <circle id="inner" class="ring-stroke-inner" cx="180" cy="190" r="35" />
      </svg>

      <input id="slider" type="range" min="4" max="14" step="0.5" value="8">
    </div>

  </div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© -->
<div id="calibrationScreen">
  <h2 style="color:white">Ø§Ø¶Ø¨Ø· Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø­Ø³Ø¨ Ø·ÙˆÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</h2>

  <div id="cardBox"></div>

  <input type="range" id="calibSlider" min="60" max="400" value="120">

  <button id="doneCalib"
    style="margin-top:25px;padding:12px;border-radius:12px;
    background:#b8860b;color:white;border:none;font-size:17px;width:90%">
    Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚
  </button>
</div>

<script>

let scaleFactor = localStorage.scaleFactor ? parseFloat(localStorage.scaleFactor) : 6.8;

/* ØªØ­Ø¯ÙŠØ« Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
function updateCardBox(){
  const px = parseFloat(calibSlider.value);
  const ratio = 53.98 / 85.6;
  cardBox.style.height = px + "px";
  cardBox.style.width  = (px * ratio) + "px";
}

/* ÙØªØ­ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© */
startCalib.onclick = () => {
  calibSlider.max = window.innerHeight * 0.85;
  calibSlider.value = 120;
  updateCardBox();

  calibrationScreen.style.display = "block";

  setTimeout(() => {
    cardBox.scrollIntoView({behavior:"smooth",block:"center"});
  }, 200);
};

calibSlider.oninput = updateCardBox;

/* Ø­ÙØ¸ */
doneCalib.onclick = () => {
  const px = parseFloat(calibSlider.value);
  const real = 85.6;
  scaleFactor = px / real;

  localStorage.setItem("scaleFactor", scaleFactor);

  calibStatus.textContent = "âœ” ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø¨Ù†Ø¬Ø§Ø­";
  calibStatus.style.color = "green";

  calibrationScreen.style.display = "none";
  pxPerMM = scaleFactor;
};

/* Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù…Ù‚Ø§Ø³ */
let pxPerMM = scaleFactor;

const PI = Math.PI;
const US_MIN=4, US_MAX=14;

const usToDiameter = us => 11.63 + 0.8128 * us;
const diameterToCirc = d => PI*d;
const usToJP = us => us + 12;

const UK_STEPS=["H","HÂ½","I","IÂ½","J","JÂ½","K","KÂ½","L","LÂ½","M","MÂ½","N","NÂ½","O","OÂ½","P","PÂ½","Q","QÂ½","R","RÂ½","S","SÂ½","T","TÂ½","U","UÂ½","V","VÂ½","W","WÂ½","X","XÂ½","Y","YÂ½","Z","Z+Â½","Z+1"];

function usToUK(us){
  const idx=(us-US_MIN)/(US_MAX-US_MIN)*(UK_STEPS.length-1);
  return UK_STEPS[Math.round(idx)];
}

function drawRing(mm){
  const r=(mm/2)*pxPerMM;
  outer.setAttribute("r",r);
  inner.setAttribute("r",r/1.7);
}

function updateAll(us){
  const d=usToDiameter(us);
  const c=diameterToCirc(d);

  usInput.value = us;
  uk.value = usToUK(us);
  fr.value = c.toFixed(1);
  jp.value = (us+12).toFixed(1);
  diameter.value = d.toFixed(2);
  circ.value = c.toFixed(1);

  slider.value = us;

  sizeLabel.innerHTML = `Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${us} (US)`;
  laser.textContent = `Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ù„Ù„Ù…Ø§ÙƒÙŠÙ†Ø©: ${c.toFixed(1)} mm`;

  drawRing(d);
}

const usInput = document.getElementById("us");

usInput.oninput = () => updateAll(parseFloat(usInput.value));

slider.oninput = () => updateAll(parseFloat(slider.value));

updateAll(8);

</script>

</body>
</html>
