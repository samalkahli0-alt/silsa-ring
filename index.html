<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>محاكاة مقاس الخاتم - SILSA</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#ffeed3;
  --ink:#3e000c;
  --gold:#b8860b;
}
body{background:var(--bg);color:var(--ink);font-family:'Tajawal',sans-serif;margin:0;padding:0;text-align:center}
.container{max-width:900px;margin:30px auto;padding:20px;background:#fff4e1;border-radius:20px;box-shadow:0 3px 10px rgba(0,0,0,.1)}
h1{margin-bottom:10px;font-size:26px;font-weight:800}
.subtitle{color:var(--ink);margin-bottom:20px}
svg{max-width:320px;height:auto;display:block;margin:20px auto}
circle{fill:none;stroke:var(--gold);stroke-width:10}
.calib-area{margin-top:30px}
#cmText{font-size:18px;font-weight:700;color:var(--ink);margin-bottom:8px}
.calib-bar{position:relative;height:50px;background:linear-gradient(90deg,#fff2cc,var(--gold));border-radius:25px;margin:0 auto 15px;display:flex;align-items:center;justify-content:center;width:300px;transition:width .25s ease}
.calib-bar::before,.calib-bar::after{content:"";position:absolute;top:-12px;width:3px;height:74px;background:var(--ink)}
.calib-bar::before{left:0}.calib-bar::after{right:0}
input[type=range]{appearance:none;width:100%;max-width:600px;height:10px;background:#dec693;border-radius:5px;outline:none;margin-top:10px}
input[type=range]::-webkit-slider-thumb{appearance:none;width:28px;height:28px;border-radius:50%;background:var(--gold);border:2px solid #fff;box-shadow:0 0 3px rgba(0,0,0,.2);cursor:pointer}
input[type=range]::-moz-range-thumb{width:28px;height:28px;border-radius:50%;background:var(--gold);border:2px solid #fff;box-shadow:0 0 3px rgba(0,0,0,.2);cursor:pointer}
.info{background:var(--bg);border:2px solid var(--gold);border-radius:14px;padding:12px;font-size:15px;line-height:1.8;margin-bottom:20px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;text-align:right}
label{font-weight:500;font-size:15px}
input{width:100%;padding:8px 10px;border-radius:8px;border:1px solid #d8b992;font-size:15px}
.error{color:red;margin-top:5px;font-weight:600;text-align:center}
</style>
</head>
<body>
<div class="container">
<h1>محاكاة مقاس الخاتم 💍</h1>
<p class="subtitle">اختاري أي مقاس وشاهدي الخاتم بالحجم الحقيقي على شاشتك.</p>

<div class="grid">
<div><label>المقاس الأمريكي (US)</label><input id="us" placeholder="7.5"></div>
<div><label>المقاس البريطاني (UK)</label><input id="uk" placeholder="K½"></div>
<div><label>المقاس الفرنسي (FR)</label><input id="fr" placeholder="56.5"></div>
<div><label>القطر الداخلي (mm)</label><input id="diameter" placeholder="18.1"></div>
</div>
<div class="error" id="error"></div>

<svg viewBox="0 0 400 400">
<circle id="ring" cx="200" cy="200" r="60"/>
</svg>

<div class="calib-area">
  <div id="cmText">3.0 سم</div>
  <div id="calibBar" class="calib-bar"></div>
  <input id="calibSlider" type="range" min="150" max="600" step="1" value="300">
</div>

<div class="info">
  ضَع المسطرة على الشاشة ثم حرّك الشريط الذهبي حتى يطابق الطول بالسنتيمتر بين الخطّين.<br>
  بعد الضبط، الخاتم يظهر بالحجم الواقعي. التعديل لا يؤثر على أي بيانات أخرى.
</div>
</div>

<script>
const usToDiameter=us=>11.63+0.8128*us;
const diameterToUs=d=>(d-11.63)/0.8128;
const ring=document.getElementById("ring");
const calibSlider=document.getElementById("calibSlider");
const calibBar=document.getElementById("calibBar");
const cmText=document.getElementById("cmText");
const us=document.getElementById("us");
const diameter=document.getElementById("diameter");
const error=document.getElementById("error");

let pxPerMM=6.8;

function drawRing(mm){
  const rPx=(mm/2)*pxPerMM;
  ring.setAttribute("r",rPx);
}

function updateAllFromUS(value){
  const n=parseFloat(value);
  if(isNaN(n))return;
  if(n<4||n>14){error.textContent="❌ المقاس خارج النطاق (4 - 14)";return;}
  error.textContent="";
  const d=usToDiameter(n);
  diameter.value=d.toFixed(2);
  drawRing(d);
}

us.addEventListener("input",()=>updateAllFromUS(us.value));
diameter.addEventListener("input",()=>{
  const d=parseFloat(diameter.value);
  if(isNaN(d))return;
  const u=diameterToUs(d);
  us.value=u.toFixed(1);
  drawRing(d);
});

function applyCalibration(){
  const px=parseFloat(calibSlider.value);
  const cm=px/100; // العرض الظاهري
  cmText.textContent=cm.toFixed(1)+" سم";
  calibBar.style.width=px+"px";
  pxPerMM=px/(cm*10); // التحويل بالملم داخليًا
  const d=parseFloat(diameter.value)||18.1;
  drawRing(d);
}

calibSlider.addEventListener("input",applyCalibration);
applyCalibration();
updateAllFromUS(7.5);
</script>
</body>
</html>
