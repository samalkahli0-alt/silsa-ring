<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’ Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#ffeed3;
      --ink:#3e000c;
      --accent:#b8860b;
      --accent2:#d4af37;
      --card:#fffaf0;
      --border:#f1d7b8;
      --muted:#7e4a55;
      --navy:#001f3f;
      --danger:#c81e1e;
    }
    body {
      font-family:'Tajawal', sans-serif;
      background:var(--bg);
      color:var(--ink);
      margin:0;
      padding:0;
      text-align:center;
    }
    h1 {font-size:28px;margin:20px 0 8px;font-weight:800;}
    .hint {color:var(--muted);font-size:14px;margin-bottom:16px;}
    .ring-wrap {display:flex;flex-direction:column;align-items:center;}
    svg {width:300px;height:auto;display:block;margin:0 auto;}
    .ring-outer{stroke:url(#grad);stroke-width:12;fill:url(#fill);filter:drop-shadow(0 6px 10px rgba(0,0,0,0.15));}
    .ring-inner{stroke:#fff;stroke-width:3;fill:none;}
    .diamond{filter:drop-shadow(0 3px 4px rgba(0,0,0,0.2));}
    @keyframes sparkle{0%{fill:#89CFF0}50%{fill:#bde3fb}100%{fill:#89CFF0}}
    .sparkle{animation:sparkle 1.2s infinite ease-in-out;}
    .label {font-weight:800;margin:10px 0;}
    .slider-wrap {width:85%;max-width:650px;margin:25px auto;}
    .slider {
      width:100%;
      appearance:none;
      height:16px;
      background:linear-gradient(90deg,#fff,#e6caa0);
      border-radius:10px;
      outline:none;
      cursor:pointer;
    }
    .slider::-webkit-slider-thumb {
      appearance:none;
      width:30px;height:30px;
      border-radius:50%;
      background:var(--accent2);
      border:3px solid white;
      box-shadow:0 0 0 2px rgba(184,134,11,0.3);
      cursor:pointer;
    }
    .calib-section {
      background:var(--card);
      border:1px solid var(--border);
      border-radius:20px;
      margin:25px auto;
      padding:20px;
      width:90%;
      max-width:700px;
      text-align:center;
      box-shadow:0 2px 8px rgba(0,0,0,0.06);
    }
    .calib-bar {
      background:linear-gradient(90deg,#fff,var(--accent2));
      border:2px solid var(--accent2);
      height:28px;
      border-radius:14px;
      width:200px;
      margin:16px auto;
      position:relative;
      transition:width 0.25s ease;
    }
    .calib-bar::before, .calib-bar::after {
      content:"";
      position:absolute;
      top:-8px;
      width:3px;height:44px;
      background:var(--ink);
    }
    .calib-bar::before {left:0;}
    .calib-bar::after {right:0;}
    button {
      background:var(--ink);
      color:var(--bg);
      border:none;
      border-radius:12px;
      padding:8px 14px;
      font-family:'Tajawal';
      font-size:15px;
      cursor:pointer;
    }
    .laser {color:var(--navy);font-weight:700;margin-top:10px;white-space:pre-line;}
    .error {color:var(--danger);font-weight:800;margin-top:8px;}
  </style>
</head>
<body>
  <h1>Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ù‚Ø§Ø³ Ø§Ù„Ø®Ø§ØªÙ… â€” SILSA ğŸ’</h1>
  <div class="hint">Ø§Ø³Ø­Ø¨ÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø£Ø¯Ù†Ø§Ù‡ Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©ØŒ Ø«Ù… Ø¬Ø±Ø¨ÙŠ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</div>

  <div class="ring-wrap">
    <div id="sizeLabel" class="label">Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: 8 (US)</div>
    <svg viewBox="0 0 360 360">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#d9d9d9"/>
          <stop offset="50%" stop-color="#f3f3f3"/>
          <stop offset="100%" stop-color="#bfbfbf"/>
        </linearGradient>
        <radialGradient id="fill" cx="50%" cy="40%" r="60%">
          <stop offset="0%" stop-color="#fff"/>
          <stop offset="100%" stop-color="#e6e6e6"/>
        </radialGradient>
      </defs>
      <circle id="outer" class="ring-outer" cx="180" cy="190" r="60"/>
      <circle id="inner" class="ring-inner" cx="180" cy="190" r="36"/>
      <polygon id="diamond" class="diamond sparkle" points="180,90 170,100 180,110 190,100" fill="#89CFF0" stroke="#5a9bd4" stroke-width="2"/>
    </svg>

    <div class="slider-wrap">
      <input id="slider" type="range" min="4" max="14" step="0.5" value="8" class="slider">
      <div class="hint">Ù…Ù† 4 Ø¥Ù„Ù‰ 14</div>
    </div>
    <div id="laser" class="laser"></div>
    <div id="error" class="error"></div>
  </div>

  <div class="calib-section">
    <h3>ğŸ”§ Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„Ù…Ø³Ø·Ø±Ø©</h3>
    <div class="hint">Ø¶Ø¹ÙŠ Ù…Ø³Ø·Ø±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© ÙˆØ§Ø¶Ø¨Ø·ÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ù„ÙŠØ·Ø§Ø¨Ù‚ 25 Ù…Ù… Ø¨Ø¯Ù‚Ø©</div>
    <input id="calibSlider" type="range" min="100" max="800" step="1" value="150" class="slider" style="height:12px;">
    <div id="calibBar" class="calib-bar"></div>
    <div id="pxBadge" class="hint">1 Ù…Ù… â‰ˆ 6.8 Ø¨ÙƒØ³Ù„</div>
    <button id="resetBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©</button>
  </div>

  <script>
    const PI=Math.PI;
    const outer=document.getElementById('outer');
    const inner=document.getElementById('inner');
    const diamond=document.getElementById('diamond');
    const sizeLabel=document.getElementById('sizeLabel');
    const laser=document.getElementById('laser');
    const error=document.getElementById('error');
    const slider=document.getElementById('slider');
    const calibSlider=document.getElementById('calibSlider');
    const calibBar=document.getElementById('calibBar');
    const pxBadge=document.getElementById('pxBadge');
    const resetBtn=document.getElementById('resetBtn');

    let pxPerMM=6.8; // Ø§ÙØªØ±Ø§Ø¶ÙŠ
    const fmt=(n,d=1)=>Number(n).toFixed(d).replace(/\\.0+$/,'').replace(/\\.$/,'');
    const usToDiameter=us=>11.63+0.8128*us;
    const diameterToCirc=d=>PI*d;

    function drawRing(d){
      const r=(d/2)*pxPerMM;
      const cx=180,cy=190;
      outer.setAttribute('r',r);
      inner.setAttribute('r',r/1.7);
      const dy=cy-r-20;
      diamond.setAttribute('points',`${cx},${dy-8} ${cx-10},${dy} ${cx},${dy+8} ${cx+10},${dy}`);
    }

    function updateFromUS(us){
      if(us<4||us>14){error.textContent='âŒ Ø§Ù„Ù…Ù‚Ø§Ø³ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚ (4â€“14)';return;}
      error.textContent='';
      const d=usToDiameter(us);
      drawRing(d);
      const thick=1.5;
      laser.textContent=`Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ù„ÙŠØ²Ø±: ${(d+thick)*PI} mm\\n(Ø³Ù…Ø§ÙƒØ© Ø§Ù„ÙØ¶Ø©: ${thick} mm)`;
      sizeLabel.textContent=`Ø§Ù„Ù…Ù‚Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${us} (US)`;
    }

    function saveCal(){localStorage.setItem('silsapx',pxPerMM.toFixed(4));}
    function loadCal(){
      const saved=localStorage.getItem('silsapx');
      if(saved){pxPerMM=parseFloat(saved);pxBadge.textContent=`1 Ù…Ù… â‰ˆ ${fmt(pxPerMM,2)} Ø¨ÙƒØ³Ù„`;drawRing(usToDiameter(parseFloat(slider.value)));}}
    function applyCal(){
      const px=parseFloat(calibSlider.value);
      const mm=25;
      pxPerMM=px/mm;
      calibBar.style.width=`${px}px`;
      pxBadge.textContent=`1 Ù…Ù… â‰ˆ ${fmt(pxPerMM,2)} Ø¨ÙƒØ³Ù„`;
      drawRing(usToDiameter(parseFloat(slider.value)));
      saveCal();
    }

    slider.addEventListener('input',()=>updateFromUS(parseFloat(slider.value)));
    calibSlider.addEventListener('input',applyCal);
    resetBtn.addEventListener('click',()=>{
      localStorage.removeItem('silsapx');
      pxPerMM=6.8;
      calibSlider.value=150;
      applyCal();
      alert('ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ âœ¨');
    });

    loadCal();
    updateFromUS(8);
    applyCal();
  </script>
</body>
</html>
